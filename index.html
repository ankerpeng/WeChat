<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <!--电话号码，在微信浏览器上正常显示-->
    <meta name="format-detection" content="telephone=no">
    <title>扫描抽奖</title>
</head>
<body>


<div id="container" style="display: none;">

</div>

<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script src="static/script/jquery.1.5.2.js"></script>
<script type="text/javascript" src="static/script/Jquery.WeChat.js"></script>

<fieldset>
    <legend>用法1 按钮2可以调取摄像头，并且可以转发</legend>
    <button id="btn">不能调取</button>

    <br/><br/><br/>
    <button id="btn2">可以调取摄像头</button>
    <script>
        //        $.WeChart({
        //            api: 'http://10.20.26.19:8544/Wechart/WeChat.asmx/GetWeChatParamters',
        //            scanAuthUrl: "http://152l8u0817.51mypc.cn/jt/wechart/index.html",
        //            typenum: 2,
        //            facid: 10,
        //            分享到朋友圈: true,
        //            forword_title: 'cccccccccccccccc',
        //            forword_link: 'http://www.baidu.com/'
        //        });
        //
        //
        //        $("#btn2").Scan(function (res) {
        //            $("#container").show();
        //            $("#container").html(res);
        //        }).Forword(function () {
        //
        //        }, function () {
        //
        //        });
    </script>
</fieldset>

<br/>

<fieldset>
    <legend>用法2 链式调用</legend>
    <button id="btn3">可以调取</button>

    <br/><br/><br/>
    <button id="btn4">可以调取摄像头</button>
    <script>
        //        $("#btn3").WeChart({
        //            api: 'http://10.20.26.19:8544/Wechart/WeChat.asmx/GetWeChatParamters',
        //            scanAuthUrl: "http://152l8u0817.51mypc.cn/jt/wechart/index.html",
        //            typenum: 2,
        //            facid: 10,
        //            分享到朋友圈: true,
        //            forword_title: 'cccccccccccccccc',
        //            forword_link: 'http://www.baidu.com/'
        //        }).Forword(function () {
        //
        //        }, function () {
        //
        //        }).Scan(function (res) {
        //
        //        });
        //
        //        $("#btn4").Scan(function (res) {
        //
        //        });
    </script>
</fieldset>

<br/>

<fieldset>
    <legend>用法3 分别调取</legend>
    <button id="btn5">可以调取</button>

    <br/><br/><br/>
    <button id="btn6">可以调取摄像头</button>
    <script>
        $.IsWeChatBrower(function (isWeChat) {
            alert(isWeChat);
        });
        $.WeChart({
            api: 'http://8056.yesno.com.local/api/wechat/getwechatparamter',//http://10.20.26.19:8544/Wechart/WeChat.asmx/GetWeChatParamters  http://10.20.26.19:8055/WeChat/GetWeChatParamter
            scanAuthUrl: "http://152l8u0817.51mypc.cn/jt/wechart/index.html",
            async: false,
            type: 'GET',
            callback_success: function (result) {
                this.appId = result.APPID;
                this.timestamp = result.TIMESTAMP;
                this.nonceStr = result.NONCESTR;
                this.signature = result.SIGNATURE;
            },
            callback_error: function (error) {
                alert(error)
            },
            typenum: '2',
            facid: '00000',
            分享到朋友圈: true,
            forword_title: '这是测试的转发',
            forword_link: 'http://www.baidu.com/'
        });


        $.Forword();

        $.InitWxError(function (res) {
            alert('初始化失败！')
        });

        $("#btn5").Scan();

        $("#btn6").Scan();

    </script>
</fieldset>
</body>
</html>